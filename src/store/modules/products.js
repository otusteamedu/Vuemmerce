const state = [
  {
    "id": 1,
    "title": "Product 1",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 50,
    "ratings": 3,
    "reviews": 5,
    "isAddedToCart": false,
    "isAddedToCompare": true,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 1,
    "brand": 1,
    "images":
      [
        {
            "title": "Slide #1",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #2",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #3",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #4",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #5",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #6",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #7",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #8",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #9",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #10",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        }
    ]
  },
  {
    "id": 2,
    "title": "Product 2",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 35,
    "ratings": 5,
    "reviews": 10,
    "isAddedToCart": false,
    "isAddedToCompare": true,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 2,
    "brand": 1,
    "images":
      [
        {
            "title": "Slide #1",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #2",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #3",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #4",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #5",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #6",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #7",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #8",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #9",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #10",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        }
    ]
  },
  {
    "id": 3,
    "title": "Product 3",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 110,
    "ratings": 2,
    "reviews": 3,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 3,
    "brand": 1,
    "images":
      [
        {
            "title": "Slide #1",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #2",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #3",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #4",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #5",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #6",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #7",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #8",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #9",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #10",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        }
    ]
  },
  {
    "id": 4,
    "title": "Product 4",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 50,
    "ratings": 1,
    "reviews": 0,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 1,
    "brand": 2,
    "images":
      [
        {
            "title": "Slide #1",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #2",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #3",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #4",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #5",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #6",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #7",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #8",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #9",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #10",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        }
    ]
  },
  {
    "id": 5,
    "title": "Product 5",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 35,
    "ratings": 4,
    "reviews": 2,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 2,
    "brand": 2,
    "images":
      [
        {
            "title": "Slide #1",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #2",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #3",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #4",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #5",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #6",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #7",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #8",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #9",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #10",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        }
    ]
  },
  {
    "id": 6,
    "title": "Product 6",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 110,
    "ratings": 5,
    "reviews": 1,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 3,
    "brand": 2,
    "images":
      [
        {
            "title": "Slide #1",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #2",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #3",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #4",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #5",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #6",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #7",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #8",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #9",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #10",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        }
    ]
  },
  {
    "id": 7,
    "title": "Product 7",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 50,
    "ratings": 5,
    "reviews": 7,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 1,
    "brand": 3,
    "images":
      [
        {
            "title": "Slide #1",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #2",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #3",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #4",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #5",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #6",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #7",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #8",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #9",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #10",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        }
    ]
  },
  {
    "id": 8,
    "title": "Product 8",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 35,
    "ratings": 3,
    "reviews": 0,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 2,
    "brand": 3,
    "images":
      [
        {
            "title": "Slide #1",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #2",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #3",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #4",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #5",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #6",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #7",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #8",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #9",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #10",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        }
    ]
  },
  {
    "id": 9,
    "title": "Product 9",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 110,
    "ratings": 4,
    "reviews": 2,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 3,
    "brand": 3,
    "images":
      [
        {
            "title": "Slide #1",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #2",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #3",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #4",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #5",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #6",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #7",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #8",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #9",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        },
        {
            "title": "Slide #10",
            "src": "https://bulma.io/images/placeholders/128x128.png"
        }
    ]
  },
  {
    "id": 10,
    "title": "Product 10",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 50,
    "ratings": 3,
    "reviews": 5,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 1,
    "brand": 4
  },
  {
    "id": 11,
    "title": "Product 11",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 35,
    "ratings": 5,
    "reviews": 10,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 2,
    "brand": 4
  },
  {
    "id": 12,
    "title": "Product 12",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 110,
    "ratings": 2,
    "reviews": 3,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 1,
    "brand": 5,
  },
  {
    "id": 13,
    "title": "Product 13",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 50,
    "ratings": 1,
    "reviews": 0,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 1,
    "brand": 1,
  },
  {
    "id": 14,
    "title": "Product 14",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 35,
    "ratings": 4,
    "reviews": 2,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 2,
    "brand": 5,
  },
  {
    "id": 15,
    "title": "Product 15",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 110,
    "ratings": 5,
    "reviews": 1,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 3,
    "brand": 4
  },
  {
    "id": 16,
    "title": "Product 16",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 50,
    "ratings": 5,
    "reviews": 7,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 1,
    "brand": 2,
  },
  {
    "id": 17,
    "title": "Product 17",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 35,
    "ratings": 3,
    "reviews": 0,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 1,
    "brand": 3,
  },
  {
    "id": 18,
    "title": "Product 18",
    "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    "price": 110,
    "ratings": 4,
    "reviews": 2,
    "isAddedToCart": false,
    "isAddedToCompare": false,
    "isAddedBtn": false,
    "isFavourite": false,
    "quantity": 1,
    "category": 1,
    "brand": 4,
  }
];

const getters = {
  getProductsList: state => {
    return state;
  },
  productsAdded: state => {
    return state.filter(el => {
      return el.isAddedToCart;
    });
  },
  productsAddedToFavourite: state => {
    return state.filter(el => {
      return el.isFavourite;
    });
  },
  productAddedToCompare: state => {
    return state.filter(el => {
      return el.isAddedToCompare;
    });
  },
  getCompareProducts: state => {
    return state.filter(el => el.isAddedToCompare)
  },
  numbersOfCompareProducts: state => {
    return state.filter(el => el.isAddedToCompare).length
  },
  getProductById: state => id => {
    return state.find(product => product.id == id);
  },
  getProductImages: state => id => {
    return state.find(product => product.id == id).images;
  },
  quantity: state => {
    return state.quantity;
  }
};

const actions = {
  pseudoFetchProduct ({ commit, getters }, id) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve(getters.getProductById(id));
      }, 2000);
    })
  },
  pseudoFetchProducts ({ commit, getters }, id) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve(getters.getProductsList.filter(product => String(product.category) === String(id)));
      }, 2000);
    })
  },
  pseudoFetchPromoProducts ({ commit, getters }) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve(getters.getProductsList.filter(product => getters.getOverallRatingProductById(product.id) >= 3));
      }, 2000);
    })
  },
  pseudoFetchProductsWithFilter ({ commit, getters }, params) {
      return new Promise((resolve, reject) => {
          setTimeout(() => {
              resolve(getters.getProductsList.filter(product => String(product.category) === String(params.id)
                  && (params.priceFrom === undefined || Number(product.price) >= params.priceFrom)
                  && (params.priceTo === undefined || Number(product.price) <= params.priceTo)
                  && (params.brands === undefined || params.brands.length === 0 || params.brands.includes(Number(product.brand)))));
          }, 2000);
      })
  },
  pseudoGetCategoryMaxPrice({ getters }, id) {
      return new Promise((resolve, reject) => {
          setTimeout(() => {

              let products = getters.getProductsList.filter(product => String(product.category) === String(id));
              resolve(
                  products.reduce(
                  (max, product) => (product.price > max ? product.price : max),
                      0));
          }, 2000);
      })
  },

  addToCartAction ({ commit }, id) {
    return new Promise((resolve, reject) => {
      commit('addToCart', id);
      commit('setAddedBtn', id);
      resolve();
    })
  }
};

const mutations = {
  addToCart: (state, id) => {
    state.forEach(el => {
      if (id === el.id) {
        el.isAddedToCart = true;
      }
    });
  },
  setAddedBtn: (state, data) => {
    state.forEach(el => {
      if (data.id === el.id) {
        el.isAddedBtn = data.status;
      }
    });
  },
  removeFromCart: (state, id) => {
    state.forEach(el => {
      if (id === el.id) {
        el.isAddedToCart = false;
      }
    });
  },
  removeProductsFromFavourite: state => {
    state.filter(el => {
      el.isFavourite = false;
    });
  },
  addToFavourite: (state, id) => {
    state.forEach(el => {
      if (id === el.id) {
        el.isFavourite = true;
      }
    });
  },
  removeFromFavourite: (state, id) => {
    state.forEach(el => {
      if (id === el.id) {
        el.isFavourite = false;
      }
    });
  },
  removeProductFromCompare: (state, id) => {
    state.forEach(el => {
      if (id == el.id) {
        el.isAddedToCompare = false
      }
    })
  },
  addProductToCompare: (state, id) => {
    state.forEach(el => {
      if (id == el.id) {
        el.isAddedToCompare = true
      }
    })
  },
  quantity: (state, data) => {
    state.forEach(el => {
      if (data.id === el.id) {
        el.quantity = data.quantity;
      }
    });
  }
};

export default {
  state,
  getters,
  actions,
  mutations
}
